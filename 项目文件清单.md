# é¡¹ç›®æ–‡ä»¶æ¸…å•

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

**ç”Ÿæˆæ—¥æœŸ**ï¼š2025-11-10  
**é¡¹ç›®åç§°**ï¼šCollaborativeTasks2  
**ç‰ˆæœ¬**ï¼šv1.0  
**ç”¨é€”**ï¼šå®Œæ•´çš„é¡¹ç›®æ–‡ä»¶ç´¢å¼•å’Œè¯´æ˜  

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
CollaborativeTasks2/
â”œâ”€â”€ README.md                           # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ pom.xml                             # Mavençˆ¶é¡¹ç›®é…ç½®
â”œâ”€â”€ develop-style.mdc                   # å¼€å‘è§„èŒƒæ–‡æ¡£
â”‚
â”œâ”€â”€ collabtask-gateway/                 # GatewayæœåŠ¡
â”‚   â”œâ”€â”€ src/main/java/io/user/gateway/
â”‚   â”‚   â”œâ”€â”€ config/                     # é…ç½®ç±»
â”‚   â”‚   â”œâ”€â”€ filter/                     # è¿‡æ»¤å™¨
â”‚   â”‚   â””â”€â”€ service/                    # æœåŠ¡å±‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ collabtask-api/                     # APIæœåŠ¡ï¼ˆä¸»è¦å¼€å‘ç›®å½•ï¼‰
â”‚   â”œâ”€â”€ src/main/java/io/user/
â”‚   â”‚   â”œâ”€â”€ entity/                     # å®ä½“ç±»ï¼ˆ11ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ dao/                        # DAOå±‚ï¼ˆ9ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ service/                    # Serviceæ¥å£ï¼ˆ6ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ service/impl/               # Serviceå®ç°ï¼ˆ6ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ controller/                 # æ§åˆ¶å™¨ï¼ˆ8ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ dto/                        # DTO/VOï¼ˆ15ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ aspect/                     # AOPåˆ‡é¢ï¼ˆ3ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ config/                     # é…ç½®ç±»ï¼ˆ5ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ common/annotation/          # æ³¨è§£ï¼ˆ4ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ interceptor/                # æ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ schedule/                   # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â””â”€â”€ ApiApplication.java         # ä¸»å¯åŠ¨ç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ mapper/                     # MyBatisæ˜ å°„ï¼ˆ9ä¸ªXMLï¼‰
â”‚   â”‚   â””â”€â”€ application.yml             # æœ¬åœ°é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ src/test/java/io/user/service/
â”‚   â”‚   â”œâ”€â”€ TodoServiceTest.java        # TODOæœåŠ¡æµ‹è¯•ï¼ˆ11ä¸ªç”¨ä¾‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ TeamServiceTest.java        # å›¢é˜ŸæœåŠ¡æµ‹è¯•ï¼ˆ13ä¸ªç”¨ä¾‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ TagServiceTest.java         # æ ‡ç­¾æœåŠ¡æµ‹è¯•ï¼ˆ13ä¸ªç”¨ä¾‹ï¼‰
â”‚   â”‚   â””â”€â”€ TokenServiceTest.java       # TokenæœåŠ¡æµ‹è¯•ï¼ˆ10ä¸ªç”¨ä¾‹ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ collabtask-common/                  # å…¬å…±æ¨¡å—
â”œâ”€â”€ collabtask-dynamic-datasource/      # åŠ¨æ€æ•°æ®æº
â”œâ”€â”€ collabtask-admin/                   # ç®¡ç†æ¨¡å—
â”‚
â”œâ”€â”€ database/                           # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ schema_acl.sql                  # å®Œæ•´Schemaï¼ˆ12è¡¨ï¼Œæ¨èä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ schema_increment.sql            # å¢é‡è„šæœ¬
â”‚   â””â”€â”€ migration_token_to_tokens.sql   # Tokenè¡¨è¿ç§»è„šæœ¬
â”‚
â”œâ”€â”€ docs/                               # åŸå§‹è®¾è®¡æ–‡æ¡£ï¼ˆ62ä¸ªï¼‰
â”‚   â”œâ”€â”€ 05-APIæ¥å£è®¾è®¡.md               # APIæ¥å£è®¾è®¡
â”‚   â”œâ”€â”€ 09-å®Œæ•´ACLæƒé™ç³»ç»Ÿè®¾è®¡.md       # ACLè®¾è®¡
â”‚   â”œâ”€â”€ 20-å¹¶å‘å¤„ç†æ–¹æ¡ˆ.md              # å¹¶å‘æ§åˆ¶
â”‚   â”œâ”€â”€ è¡¨åæ˜ å°„æ¸…å•.md                 # è¡¨ä¸Entityæ˜ å°„
â”‚   â”œâ”€â”€ åˆ†å¸ƒå¼é”å’ŒRedisä½¿ç”¨æ¸…å•.md      # Redisä½¿ç”¨è¯´æ˜
â”‚   â””â”€â”€ ...                             # å…¶ä»–60+è®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ docs-final/                         # æ•´ç†åçš„æ–‡æ¡£ï¼ˆæ¨èæŸ¥çœ‹ï¼‰
â”‚   â”œâ”€â”€ 01-è®¾è®¡æ–‡æ¡£/                    # æ‰€æœ‰è®¾è®¡æ–‡æ¡£çš„å‰¯æœ¬
â”‚   â”œâ”€â”€ 02-æµ‹è¯•æŠ¥å‘Š/                    # æµ‹è¯•æŠ¥å‘Š
â”‚   â”‚   â”œâ”€â”€ åŠŸèƒ½æµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md
â”‚   â”‚   â”œâ”€â”€ é›†æˆæµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md
â”‚   â”‚   â”œâ”€â”€ å•å…ƒæµ‹è¯•-äº¤ä»˜æŠ¥å‘Š.md
â”‚   â”‚   â””â”€â”€ å•å…ƒæµ‹è¯•-æ‰§è¡ŒæŠ¥å‘Š.md
â”‚   â””â”€â”€ 03-äº¤ä»˜æ–‡æ¡£/                    # é¡¹ç›®äº¤ä»˜æ–‡æ¡£
â”‚       â”œâ”€â”€ é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md        # â­ é¡¹ç›®æ€»è§ˆ
â”‚       â”œâ”€â”€ ä»£ç ç”Ÿæˆ-æœ€ç»ˆäº¤ä»˜æŠ¥å‘Š.md    # ä»£ç äº¤ä»˜
â”‚       â”œâ”€â”€ é—®é¢˜ä¿®å¤-å®ŒæˆæŠ¥å‘Š.md        # Bugä¿®å¤è®°å½•
â”‚       â”œâ”€â”€ TODOæ¨¡å—-å¼€å‘å®ŒæˆæŠ¥å‘Š.md
â”‚       â”œâ”€â”€ TokenåŠŸèƒ½-äº¤ä»˜æ¸…å•.md
â”‚       â””â”€â”€ Tokenè¿ç§»-æœ€ç»ˆéªŒè¯æŠ¥å‘Š.md
â”‚
â””â”€â”€ archive/                            # å½’æ¡£æ–‡ä»¶ï¼ˆå†å²è®°å½•ï¼‰
    â”œâ”€â”€ design-history/                 # å†å²è®¾è®¡æ–‡æ¡£
    â”œâ”€â”€ test-history/                   # å†å²æµ‹è¯•æ–‡æ¡£
    â”œâ”€â”€ migration-history/              # è¿ç§»ç›¸å…³æ–‡æ¡£
    â”œâ”€â”€ database-history/               # æ—§æ•°æ®åº“è„šæœ¬
    â””â”€â”€ code-generated/                 # ä»£ç ç”Ÿæˆè‰ç¨¿
```

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

### ä»£ç æ–‡ä»¶

| ç±»å‹ | æ•°é‡ | ä½ç½® |
|------|------|------|
| **Entity** | 12 | `collabtask-api/src/main/java/io/user/entity/` |
| **DAOæ¥å£** | 9 | `collabtask-api/src/main/java/io/user/dao/` |
| **DAOæ˜ å°„** | 9 | `collabtask-api/src/main/resources/mapper/` |
| **Serviceæ¥å£** | 6 | `collabtask-api/src/main/java/io/user/service/` |
| **Serviceå®ç°** | 6 | `collabtask-api/src/main/java/io/user/service/impl/` |
| **Controller** | 8 | `collabtask-api/src/main/java/io/user/controller/` |
| **DTO/VO** | 15 | `collabtask-api/src/main/java/io/user/dto/` |
| **æ³¨è§£** | 4 | `collabtask-api/src/main/java/io/user/common/annotation/` |
| **åˆ‡é¢** | 3 | `collabtask-api/src/main/java/io/user/aspect/` |
| **é…ç½®** | 5 | `collabtask-api/src/main/java/io/user/config/` |
| **æ‹¦æˆªå™¨** | 1 | `collabtask-api/src/main/java/io/user/interceptor/` |
| **å®šæ—¶ä»»åŠ¡** | 1 | `collabtask-api/src/main/java/io/user/schedule/` |
| **æµ‹è¯•ç±»** | 4 | `collabtask-api/src/test/java/io/user/service/` |
| **Gateway** | è‹¥å¹² | `collabtask-gateway/src/main/java/` |
| **æ€»è®¡** | **~80+** | - |

**ä»£ç è¡Œæ•°**ï¼šçº¦6,000è¡Œï¼ˆåŒ…å«æµ‹è¯•ä»£ç ï¼‰

---

### æ–‡æ¡£æ–‡ä»¶

#### æ ¸å¿ƒæ–‡æ¡£ï¼ˆæ ¹ç›®å½•ï¼‰

| æ–‡ä»¶å | è¯´æ˜ | é‡è¦æ€§ |
|--------|------|--------|
| `README.md` | é¡¹ç›®è¯´æ˜å’Œå¿«é€Ÿå¼€å§‹ | â­â­â­â­â­ |
| `develop-style.mdc` | å¼€å‘è§„èŒƒ | â­â­â­â­ |

#### è®¾è®¡æ–‡æ¡£ï¼ˆdocs-final/01-è®¾è®¡æ–‡æ¡£/ï¼‰

**æ ¸å¿ƒè®¾è®¡æ–‡æ¡£**ï¼ˆâ­â­â­â­â­ å¿…è¯»ï¼‰ï¼š
- `05-APIæ¥å£è®¾è®¡.md` - 30ä¸ªAPIæ¥å£è¯¦ç»†è®¾è®¡
- `09-å®Œæ•´ACLæƒé™ç³»ç»Ÿè®¾è®¡.md` - ACLæƒé™ç³»ç»Ÿè®¾è®¡
- `20-å¹¶å‘å¤„ç†æ–¹æ¡ˆ.md` - åˆ†å¸ƒå¼é”å’Œå¹‚ç­‰æ€§
- `è¡¨åæ˜ å°„æ¸…å•.md` - æ•°æ®åº“è¡¨ä¸Entityæ˜ å°„
- `åˆ†å¸ƒå¼é”å’ŒRedisä½¿ç”¨æ¸…å•.md` - Redisä½¿ç”¨è¯´æ˜

**å…¶ä»–è®¾è®¡æ–‡æ¡£**ï¼ˆçº¦60ä¸ªï¼‰ï¼š
- Tokenç›¸å…³è®¾è®¡æ–‡æ¡£
- æ•°æ®åº“è®¾è®¡æ–‡æ¡£
- æƒé™è®¾è®¡æ–‡æ¡£
- æµ‹è¯•è®¾è®¡æ–‡æ¡£

#### æµ‹è¯•æŠ¥å‘Šï¼ˆdocs-final/02-æµ‹è¯•æŠ¥å‘Š/ï¼‰

| æ–‡ä»¶å | æµ‹è¯•ç±»å‹ | ç”¨ä¾‹æ•° | é€šè¿‡ç‡ |
|--------|---------|--------|--------|
| `å•å…ƒæµ‹è¯•-æ‰§è¡ŒæŠ¥å‘Š.md` | å•å…ƒæµ‹è¯• | 47 | 100% |
| `å•å…ƒæµ‹è¯•-äº¤ä»˜æŠ¥å‘Š.md` | å•å…ƒæµ‹è¯•è®¾è®¡ | 55 | - |
| `é›†æˆæµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md` | é›†æˆæµ‹è¯• | 21 | 100% |
| `åŠŸèƒ½æµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md` | åŠŸèƒ½æµ‹è¯• | 26 | 100% |

**æ€»æµ‹è¯•ç”¨ä¾‹**ï¼š149ä¸ª

#### äº¤ä»˜æ–‡æ¡£ï¼ˆdocs-final/03-äº¤ä»˜æ–‡æ¡£/ï¼‰

| æ–‡ä»¶å | è¯´æ˜ | é˜…è¯»ä¼˜å…ˆçº§ |
|--------|------|-----------|
| `é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md` | â­ é¡¹ç›®æ€»è§ˆ | æœ€é«˜ |
| `ä»£ç ç”Ÿæˆ-æœ€ç»ˆäº¤ä»˜æŠ¥å‘Š.md` | ä»£ç äº¤ä»˜è¯¦æƒ… | é«˜ |
| `é—®é¢˜ä¿®å¤-å®ŒæˆæŠ¥å‘Š.md` | Bugä¿®å¤è®°å½• | ä¸­ |
| `TODOæ¨¡å—-å¼€å‘å®ŒæˆæŠ¥å‘Š.md` | TODOæ¨¡å—äº¤ä»˜ | ä½ |
| `TokenåŠŸèƒ½-äº¤ä»˜æ¸…å•.md` | TokenåŠŸèƒ½äº¤ä»˜ | ä½ |
| `Tokenè¿ç§»-æœ€ç»ˆéªŒè¯æŠ¥å‘Š.md` | Tokenè¿ç§»éªŒè¯ | ä½ |

---

### æ•°æ®åº“æ–‡ä»¶

#### æ ¸å¿ƒè„šæœ¬ï¼ˆdatabase/ï¼‰

| æ–‡ä»¶å | è¯´æ˜ | ç”¨é€” |
|--------|------|------|
| `schema_acl.sql` | â­ å®Œæ•´Schema | æ–°éƒ¨ç½²æ—¶ä½¿ç”¨ï¼ˆæ¨èï¼‰|
| `schema_increment.sql` | å¢é‡è„šæœ¬ | åœ¨æ—§è¡¨åŸºç¡€ä¸Šå¢åŠ  |
| `migration_token_to_tokens.sql` | Tokenè¡¨è¿ç§» | Tokenè¡¨å‡çº§æ—¶ä½¿ç”¨ |

**è¯´æ˜**ï¼š
- æ–°é¡¹ç›®éƒ¨ç½²ï¼šä½¿ç”¨ `schema_acl.sql`
- å·²æœ‰æ•°æ®åº“ï¼šä½¿ç”¨ `schema_increment.sql`
- Tokenè¡¨è¿ç§»ï¼šä½¿ç”¨ `migration_token_to_tokens.sql`

#### å½’æ¡£è„šæœ¬ï¼ˆarchive/database-history/ï¼‰

- `schema.sql` - æ—§ç‰ˆSchema
- `schema_acl_microservices.sql` - ä¸­é—´ç‰ˆæœ¬
- `schema_with_acl.sql` - å†å²ç‰ˆæœ¬
- `schema_with_acl_final.sql` - å†å²ç‰ˆæœ¬

**å»ºè®®**ï¼šä»…ä½œå‚è€ƒï¼Œä¸æ¨èä½¿ç”¨

---

### å½’æ¡£æ–‡ä»¶ï¼ˆarchive/ï¼‰

| ç›®å½• | æ–‡ä»¶æ•° | è¯´æ˜ |
|------|--------|------|
| `design-history/` | 4 | å†å²è®¾è®¡æ–‡æ¡£ |
| `test-history/` | 2 | å†å²æµ‹è¯•æŠ¥å‘Š |
| `migration-history/` | 7 | Tokenè¿ç§»ç›¸å…³ |
| `database-history/` | 4 | æ—§æ•°æ®åº“è„šæœ¬ |
| `code-generated/` | è‹¥å¹² | ä»£ç ç”Ÿæˆè‰ç¨¿ |
| å…¶ä»–ä¸´æ—¶æ–‡æ¡£ | 5 | å¼€å‘è¿‡ç¨‹æ–‡æ¡£ |

**æ€»è®¡**ï¼šçº¦20+ä¸ªå½’æ¡£æ–‡ä»¶

**å»ºè®®**ï¼šå½’æ¡£æ–‡ä»¶ä»…ä½œå†å²å‚è€ƒï¼Œæ—¥å¸¸å¼€å‘ä¸éœ€è¦æŸ¥çœ‹

---

## ğŸ¯ å¿«é€Ÿå¯¼èˆª

### ğŸš€ æ–°äººä¸Šæ‰‹å¿…è¯»

1. **README.md** - é¡¹ç›®ä»‹ç»å’Œå¿«é€Ÿå¼€å§‹
2. **docs-final/03-äº¤ä»˜æ–‡æ¡£/é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md** - é¡¹ç›®æ€»è§ˆ
3. **docs-final/01-è®¾è®¡æ–‡æ¡£/05-APIæ¥å£è®¾è®¡.md** - APIæ¥å£æ–‡æ¡£
4. **develop-style.mdc** - å¼€å‘è§„èŒƒ

### ğŸ“– å¼€å‘äººå‘˜å¿…è¯»

1. **docs-final/01-è®¾è®¡æ–‡æ¡£/09-å®Œæ•´ACLæƒé™ç³»ç»Ÿè®¾è®¡.md** - æƒé™è®¾è®¡
2. **docs-final/01-è®¾è®¡æ–‡æ¡£/20-å¹¶å‘å¤„ç†æ–¹æ¡ˆ.md** - å¹¶å‘æ§åˆ¶
3. **docs-final/01-è®¾è®¡æ–‡æ¡£/è¡¨åæ˜ å°„æ¸…å•.md** - æ•°æ®åº“æ˜ å°„
4. **docs-final/01-è®¾è®¡æ–‡æ¡£/åˆ†å¸ƒå¼é”å’ŒRedisä½¿ç”¨æ¸…å•.md** - Redisä½¿ç”¨

### ğŸ§ª æµ‹è¯•äººå‘˜å¿…è¯»

1. **docs-final/02-æµ‹è¯•æŠ¥å‘Š/å•å…ƒæµ‹è¯•-æ‰§è¡ŒæŠ¥å‘Š.md** - æœ€æ–°æµ‹è¯•ç»“æœ
2. **docs-final/02-æµ‹è¯•æŠ¥å‘Š/é›†æˆæµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md** - é›†æˆæµ‹è¯•æŠ¥å‘Š
3. **docs-final/02-æµ‹è¯•æŠ¥å‘Š/åŠŸèƒ½æµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md** - åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

### ğŸš¢ éƒ¨ç½²äººå‘˜å¿…è¯»

1. **README.md** - éƒ¨ç½²æŒ‡å—
2. **database/schema_acl.sql** - æ•°æ®åº“åˆå§‹åŒ–
3. **docs/Nacosé…ç½®è¯´æ˜.md** - Nacosé…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰

---

## ğŸ“ æ ¸å¿ƒä»£ç æ–‡ä»¶æ¸…å•

### Entityå±‚ï¼ˆ12ä¸ªï¼‰

```
collabtask-api/src/main/java/io/user/entity/
â”œâ”€â”€ UserEntity.java                          # ç”¨æˆ·å®ä½“
â”œâ”€â”€ TokenEntity.java                         # Tokenå®ä½“ï¼ˆv2.0ï¼‰
â”œâ”€â”€ TodoEntity.java                          # TODOå®ä½“
â”œâ”€â”€ TeamEntity.java                          # å›¢é˜Ÿå®ä½“
â”œâ”€â”€ TeamMemberEntity.java                    # å›¢é˜Ÿæˆå‘˜å®ä½“
â”œâ”€â”€ TagEntity.java                           # æ ‡ç­¾å®ä½“
â”œâ”€â”€ TodoTagEntity.java                       # TODO-æ ‡ç­¾å…³è”å®ä½“
â”œâ”€â”€ AclPermissionDefinitionEntity.java       # ACLæƒé™å®šä¹‰å®ä½“
â”œâ”€â”€ AclAccessControlEntity.java              # ACLè®¿é—®æ§åˆ¶å®ä½“
â”œâ”€â”€ AclPermissionAuditEntity.java            # ACLæƒé™å®¡è®¡å®ä½“
â”œâ”€â”€ AclRoleDefinitionEntity.java             # ACLè§’è‰²å®šä¹‰å®ä½“
â””â”€â”€ AclUserRoleEntity.java                   # ACLç”¨æˆ·è§’è‰²å®ä½“
```

### DAOå±‚ï¼ˆ9ä¸ªæ¥å£ + 9ä¸ªXMLï¼‰

**DAOæ¥å£**ï¼š
```
collabtask-api/src/main/java/io/user/dao/
â”œâ”€â”€ UserDao.java
â”œâ”€â”€ TokenDao.java
â”œâ”€â”€ TodoDao.java
â”œâ”€â”€ TeamDao.java
â”œâ”€â”€ TeamMemberDao.java
â”œâ”€â”€ TagDao.java
â”œâ”€â”€ TodoTagDao.java
â”œâ”€â”€ AclAccessControlDao.java
â””â”€â”€ AclPermissionAuditDao.java
```

**MyBatisæ˜ å°„**ï¼š
```
collabtask-api/src/main/resources/mapper/
â”œâ”€â”€ UserDao.xml
â”œâ”€â”€ TokenDao.xml
â”œâ”€â”€ TodoDao.xml
â”œâ”€â”€ TeamDao.xml
â”œâ”€â”€ TeamMemberDao.xml
â”œâ”€â”€ TagDao.xml
â”œâ”€â”€ TodoTagDao.xml
â”œâ”€â”€ AclAccessControlDao.xml
â””â”€â”€ AclPermissionAuditDao.xml
```

### Serviceå±‚ï¼ˆ6ä¸ªæ¥å£ + 6ä¸ªå®ç°ï¼‰

**Serviceæ¥å£**ï¼š
```
collabtask-api/src/main/java/io/user/service/
â”œâ”€â”€ UserService.java
â”œâ”€â”€ TokenService.java
â”œâ”€â”€ TodoService.java
â”œâ”€â”€ TeamService.java
â”œâ”€â”€ TagService.java
â””â”€â”€ AclPermissionService.java
```

**Serviceå®ç°**ï¼š
```
collabtask-api/src/main/java/io/user/service/impl/
â”œâ”€â”€ UserServiceImpl.java                     # ç”¨æˆ·æœåŠ¡å®ç°
â”œâ”€â”€ TokenServiceImpl.java                    # TokenæœåŠ¡å®ç°ï¼ˆv2.0ï¼‰
â”œâ”€â”€ TodoServiceImpl.java                     # TODOæœåŠ¡å®ç°
â”œâ”€â”€ TeamServiceImpl.java                     # å›¢é˜ŸæœåŠ¡å®ç°
â”œâ”€â”€ TagServiceImpl.java                      # æ ‡ç­¾æœåŠ¡å®ç°
â””â”€â”€ AclPermissionServiceImpl.java            # ACLæƒé™æœåŠ¡å®ç°
```

### Controllerå±‚ï¼ˆ8ä¸ªï¼‰

```
collabtask-api/src/main/java/io/user/controller/
â”œâ”€â”€ ApiLoginController.java                  # ç™»å½•/ç™»å‡º
â”œâ”€â”€ ApiRegisterController.java               # æ³¨å†Œ
â”œâ”€â”€ AuthController.java                      # Tokenåˆ·æ–°/ç™»å‡ºæ‰€æœ‰è®¾å¤‡
â”œâ”€â”€ TokenController.java                     # TokenéªŒè¯ï¼ˆGatewayè°ƒç”¨ï¼‰
â”œâ”€â”€ TodoController.java                      # TODOç®¡ç†ï¼ˆ6ä¸ªæ¥å£ï¼‰
â”œâ”€â”€ TeamController.java                      # å›¢é˜Ÿç®¡ç†ï¼ˆ9ä¸ªæ¥å£ï¼‰
â”œâ”€â”€ TagController.java                       # æ ‡ç­¾ç®¡ç†ï¼ˆ8ä¸ªæ¥å£ï¼‰
â””â”€â”€ UserController.java                      # ç”¨æˆ·ç®¡ç†
```

### DTOå±‚ï¼ˆ15ä¸ªï¼‰

```
collabtask-api/src/main/java/io/user/dto/
â”œâ”€â”€ LoginDTO.java                            # ç™»å½•è¯·æ±‚
â”œâ”€â”€ RegisterDTO.java                         # æ³¨å†Œè¯·æ±‚
â”œâ”€â”€ RefreshTokenDTO.java                     # åˆ·æ–°Tokenè¯·æ±‚
â”œâ”€â”€ LogoutAllDTO.java                        # ç™»å‡ºæ‰€æœ‰è®¾å¤‡è¯·æ±‚
â”œâ”€â”€ TodoCreateDTO.java                       # åˆ›å»ºTODOè¯·æ±‚
â”œâ”€â”€ TodoUpdateDTO.java                       # æ›´æ–°TODOè¯·æ±‚
â”œâ”€â”€ TodoQueryDTO.java                        # æŸ¥è¯¢TODOè¯·æ±‚
â”œâ”€â”€ TodoVO.java                              # TODOå“åº”
â”œâ”€â”€ TeamCreateDTO.java                       # åˆ›å»ºå›¢é˜Ÿè¯·æ±‚
â”œâ”€â”€ TeamUpdateDTO.java                       # æ›´æ–°å›¢é˜Ÿè¯·æ±‚
â”œâ”€â”€ TeamVO.java                              # å›¢é˜Ÿå“åº”
â”œâ”€â”€ TeamMemberVO.java                        # å›¢é˜Ÿæˆå‘˜å“åº”
â”œâ”€â”€ TagCreateDTO.java                        # åˆ›å»ºæ ‡ç­¾è¯·æ±‚
â”œâ”€â”€ TagUpdateDTO.java                        # æ›´æ–°æ ‡ç­¾è¯·æ±‚
â””â”€â”€ TagVO.java                               # æ ‡ç­¾å“åº”
```

### æ³¨è§£å±‚ï¼ˆ4ä¸ªï¼‰

```
collabtask-api/src/main/java/io/user/common/annotation/
â”œâ”€â”€ Login.java                               # ç™»å½•è®¤è¯æ³¨è§£
â”œâ”€â”€ RequirePermission.java                   # æƒé™æ£€æŸ¥æ³¨è§£
â”œâ”€â”€ DistributedLock.java                     # åˆ†å¸ƒå¼é”æ³¨è§£
â””â”€â”€ Idempotent.java                          # å¹‚ç­‰æ€§æ³¨è§£
```

### åˆ‡é¢å±‚ï¼ˆ3ä¸ªï¼‰

```
collabtask-api/src/main/java/io/user/aspect/
â”œâ”€â”€ PermissionCheckAspect.java               # æƒé™æ£€æŸ¥åˆ‡é¢
â”œâ”€â”€ DistributedLockAspect.java               # åˆ†å¸ƒå¼é”åˆ‡é¢
â””â”€â”€ IdempotentAspect.java                    # å¹‚ç­‰æ€§åˆ‡é¢
```

### é…ç½®å±‚ï¼ˆ5ä¸ªï¼‰

```
collabtask-api/src/main/java/io/user/config/
â”œâ”€â”€ RedissonConfig.java                      # Redissoné…ç½®
â”œâ”€â”€ WebMvcConfig.java                        # MVCé…ç½®
â”œâ”€â”€ FilterConfig.java                        # è¿‡æ»¤å™¨é…ç½®
â”œâ”€â”€ SwaggerConfig.java                       # Swaggeré…ç½®ï¼ˆå¦‚æœ‰ï¼‰
â””â”€â”€ ...                                      # å…¶ä»–é…ç½®
```

### æµ‹è¯•å±‚ï¼ˆ4ä¸ªï¼‰

```
collabtask-api/src/test/java/io/user/service/
â”œâ”€â”€ TodoServiceTest.java                     # 11ä¸ªæµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ TeamServiceTest.java                     # 13ä¸ªæµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ TagServiceTest.java                      # 13ä¸ªæµ‹è¯•ç”¨ä¾‹
â””â”€â”€ TokenServiceTest.java                    # 10ä¸ªæµ‹è¯•ç”¨ä¾‹
```

**æµ‹è¯•ä»£ç è¡Œæ•°**ï¼šçº¦1,490è¡Œ

---

## ğŸ“š æ–‡æ¡£åˆ†ç±»è¯´æ˜

### ä¸€ã€å¿…è¯»æ–‡æ¡£ï¼ˆâ­â­â­â­â­ï¼‰

**æ ¹ç›®å½•**ï¼š
1. `README.md` - é¡¹ç›®ä»‹ç»ã€å¿«é€Ÿå¼€å§‹ã€APIæ¦‚è§ˆ

**docs-final/03-äº¤ä»˜æ–‡æ¡£/**ï¼š
2. `é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md` - é¡¹ç›®å®Œæ•´æ€»ç»“ã€æŠ€æœ¯æ ˆã€éƒ¨ç½²æŒ‡å—

**docs-final/01-è®¾è®¡æ–‡æ¡£/**ï¼š
3. `05-APIæ¥å£è®¾è®¡.md` - 30ä¸ªAPIæ¥å£è¯¦ç»†è®¾è®¡
4. `09-å®Œæ•´ACLæƒé™ç³»ç»Ÿè®¾è®¡.md` - ACLæƒé™ç³»ç»Ÿå®Œæ•´è®¾è®¡

---

### äºŒã€é‡è¦æ–‡æ¡£ï¼ˆâ­â­â­â­ï¼‰

**è®¾è®¡ç±»**ï¼š
- `develop-style.mdc` - å¼€å‘è§„èŒƒ
- `20-å¹¶å‘å¤„ç†æ–¹æ¡ˆ.md` - å¹¶å‘æ§åˆ¶è®¾è®¡
- `è¡¨åæ˜ å°„æ¸…å•.md` - æ•°æ®åº“è¡¨æ˜ å°„
- `åˆ†å¸ƒå¼é”å’ŒRedisä½¿ç”¨æ¸…å•.md` - Redisä½¿ç”¨è¯´æ˜

**æµ‹è¯•ç±»**ï¼š
- `å•å…ƒæµ‹è¯•-æ‰§è¡ŒæŠ¥å‘Š.md` - æœ€æ–°æµ‹è¯•ç»“æœ
- `é›†æˆæµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md` - é›†æˆæµ‹è¯•æŠ¥å‘Š
- `åŠŸèƒ½æµ‹è¯•-å®Œæ•´æŠ¥å‘Š.md` - åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

---

### ä¸‰ã€å‚è€ƒæ–‡æ¡£ï¼ˆâ­â­â­ï¼‰

**äº¤ä»˜ç±»**ï¼š
- `ä»£ç ç”Ÿæˆ-æœ€ç»ˆäº¤ä»˜æŠ¥å‘Š.md` - ä»£ç äº¤ä»˜è¯¦æƒ…
- `é—®é¢˜ä¿®å¤-å®ŒæˆæŠ¥å‘Š.md` - Bugä¿®å¤è®°å½•
- `TODOæ¨¡å—-å¼€å‘å®ŒæˆæŠ¥å‘Š.md` - TODOæ¨¡å—äº¤ä»˜
- `TokenåŠŸèƒ½-äº¤ä»˜æ¸…å•.md` - TokenåŠŸèƒ½äº¤ä»˜

**è®¾è®¡ç±»**ï¼ˆdocs/ç›®å½•ï¼‰ï¼š
- å…¶ä»–60+ä¸ªè¯¦ç»†è®¾è®¡æ–‡æ¡£

---

### å››ã€å½’æ¡£æ–‡æ¡£ï¼ˆâ­ï¼‰

**archive/**ï¼š
- æ‰€æœ‰å†å²ç‰ˆæœ¬æ–‡æ¡£
- è¿ç§»è¿‡ç¨‹æ–‡æ¡£
- ä»£ç ç”Ÿæˆè‰ç¨¿

**è¯´æ˜**ï¼šä»…ä½œå†å²å‚è€ƒï¼Œæ—¥å¸¸ä¸éœ€è¦æŸ¥çœ‹

---

## ğŸ¯ æ–‡ä»¶ä½¿ç”¨æŒ‡å—

### åœºæ™¯1ï¼šæ–°äººå…¥èŒ

**é˜…è¯»é¡ºåº**ï¼š
1. README.md
2. é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md
3. 05-APIæ¥å£è®¾è®¡.md
4. develop-style.mdc

**é¢„è®¡æ—¶é—´**ï¼š1-2å°æ—¶

---

### åœºæ™¯2ï¼šå¼€å‘æ–°åŠŸèƒ½

**å‚è€ƒæ–‡ä»¶**ï¼š
1. develop-style.mdcï¼ˆå¼€å‘è§„èŒƒï¼‰
2. ç°æœ‰ä»£ç ï¼ˆTodoServiceç­‰ï¼‰
3. 05-APIæ¥å£è®¾è®¡.mdï¼ˆæ¥å£è®¾è®¡ï¼‰
4. 09-å®Œæ•´ACLæƒé™ç³»ç»Ÿè®¾è®¡.mdï¼ˆæƒé™è®¾è®¡ï¼‰

---

### åœºæ™¯3ï¼šéƒ¨ç½²ä¸Šçº¿

**ä½¿ç”¨æ–‡ä»¶**ï¼š
1. README.md - éƒ¨ç½²æ­¥éª¤
2. database/schema_acl.sql - æ•°æ®åº“åˆå§‹åŒ–
3. Nacosé…ç½®æ–‡ä»¶
4. JARåŒ…ï¼ˆtarget/ç›®å½•ï¼‰

---

### åœºæ™¯4ï¼šBugä¿®å¤

**å‚è€ƒæ–‡ä»¶**ï¼š
1. é—®é¢˜ä¿®å¤-å®ŒæˆæŠ¥å‘Š.mdï¼ˆå·²ä¿®å¤é—®é¢˜å‚è€ƒï¼‰
2. æµ‹è¯•æŠ¥å‘Šï¼ˆéªŒè¯ä¿®å¤æ•ˆæœï¼‰
3. ä»£ç æ³¨é‡Š
4. å•å…ƒæµ‹è¯•

---

## ğŸ“Š é¡¹ç›®è§„æ¨¡ç»Ÿè®¡

### ä»£ç è§„æ¨¡

| æ¨¡å— | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° | è¯´æ˜ |
|------|--------|---------|------|
| Entity | 12 | ~850 | å®ä½“ç±» |
| DAO | 18 | ~400 | DAO+Mapper |
| Service | 12 | ~1,800 | ä¸šåŠ¡é€»è¾‘ |
| Controller | 8 | ~950 | APIæ¥å£ |
| DTO | 15 | ~600 | æ•°æ®ä¼ è¾“ |
| æ³¨è§£+åˆ‡é¢ | 7 | ~500 | AOP |
| é…ç½® | 5 | ~300 | é…ç½®ç±» |
| æµ‹è¯• | 4 | ~1,500 | å•å…ƒæµ‹è¯• |
| Gateway | è‹¥å¹² | ~500 | ç½‘å…³ |
| **æ€»è®¡** | **~80** | **~7,400** | **åŒ…å«æµ‹è¯•** |

### æ–‡æ¡£è§„æ¨¡

| ç±»å‹ | æ–‡ä»¶æ•° | é¡µæ•°ï¼ˆä¼°ç®—ï¼‰ |
|------|--------|-------------|
| æ ¸å¿ƒæ–‡æ¡£ | 2 | 20 |
| è®¾è®¡æ–‡æ¡£ | 62 | 300+ |
| æµ‹è¯•æŠ¥å‘Š | 4 | 40 |
| äº¤ä»˜æ–‡æ¡£ | 6 | 60 |
| å½’æ¡£æ–‡æ¡£ | 20+ | 100+ |
| **æ€»è®¡** | **94+** | **500+** |

---

## ğŸ—‚ï¸ æ–‡ä»¶ç®¡ç†å»ºè®®

### æ—¥å¸¸å¼€å‘

**æ´»è·ƒç›®å½•**ï¼š
- `collabtask-api/src/` - æ‰€æœ‰å¼€å‘éƒ½åœ¨è¿™é‡Œ
- `docs-final/01-è®¾è®¡æ–‡æ¡£/` - è®¾è®¡å‚è€ƒ
- `database/` - æ•°æ®åº“è„šæœ¬

**å¾ˆå°‘è®¿é—®**ï¼š
- `archive/` - ä»…åœ¨éœ€è¦å†å²è®°å½•æ—¶æŸ¥çœ‹
- `docs/` - è¯¦ç»†è®¾è®¡å‚è€ƒï¼ˆå·²å¤åˆ¶åˆ°docs-finalï¼‰

---

### ç‰ˆæœ¬æ§åˆ¶

**å»ºè®®åŠ å…¥Git**ï¼š
- âœ… æ‰€æœ‰æºä»£ç ï¼ˆsrc/ï¼‰
- âœ… æ ¸å¿ƒæ–‡æ¡£ï¼ˆREADME.md, docs-final/ï¼‰
- âœ… æ•°æ®åº“è„šæœ¬ï¼ˆdatabase/æ ¸å¿ƒ3ä¸ªï¼‰
- âœ… pom.xml

**å»ºè®®å¿½ç•¥ï¼ˆ.gitignoreï¼‰**ï¼š
- âŒ archive/ï¼ˆå¤ªå¤§ï¼Œä»…æœ¬åœ°ä¿ç•™ï¼‰
- âŒ docs/ï¼ˆå·²æ•´ç†åˆ°docs-finalï¼‰
- âŒ target/ï¼ˆç¼–è¯‘äº§ç‰©ï¼‰
- âŒ *.logï¼ˆæ—¥å¿—æ–‡ä»¶ï¼‰
- âŒ .idea/ï¼ˆIDEé…ç½®ï¼‰

---

### æ–‡æ¡£ç»´æŠ¤

**å®šæœŸæ›´æ–°**ï¼š
- README.md
- APIæ¥å£è®¾è®¡.md
- æµ‹è¯•æŠ¥å‘Š

**å½’æ¡£ç­–ç•¥**ï¼š
- æ¯æ¬¡é‡å¤§ç‰ˆæœ¬å‘å¸ƒå
- å°†å½“å‰æµ‹è¯•æŠ¥å‘Šç§»åˆ°archive
- ä¿æŒdocs-finalç›®å½•ç®€æ´

---

## ğŸ‰ æ•´ç†æˆæœ

### æ•´ç†å‰

```
æ ¹ç›®å½•æ··ä¹±ï¼š28ä¸ªMarkdownæ–‡ä»¶
æ–‡æ¡£åˆ†æ•£ï¼šè®¾è®¡ã€æµ‹è¯•ã€äº¤ä»˜æ··åœ¨ä¸€èµ·
å†å²æ–‡ä»¶ï¼šå¤§é‡è¿‡æ—¶æ–‡æ¡£æ— æ³•åŒºåˆ†
```

### æ•´ç†å

```
æ ¹ç›®å½•æ¸…çˆ½ï¼š1ä¸ªREADME.md
æ–‡æ¡£åˆ†ç±»ï¼š
  - docs-final/01-è®¾è®¡æ–‡æ¡£/ï¼ˆ62ä¸ªï¼‰
  - docs-final/02-æµ‹è¯•æŠ¥å‘Š/ï¼ˆ4ä¸ªï¼‰
  - docs-final/03-äº¤ä»˜æ–‡æ¡£/ï¼ˆ6ä¸ªï¼‰
å†å²å½’æ¡£ï¼š
  - archive/ï¼ˆ20+ä¸ªå†å²æ–‡ä»¶ï¼‰
```

**æ”¹å–„**ï¼š
- âœ… æ ¹ç›®å½•æ¸…çˆ½
- âœ… æ–‡æ¡£åˆ†ç±»æ¸…æ™°
- âœ… å†å²æ–‡ä»¶å½’æ¡£
- âœ… æ˜“äºå¯¼èˆªå’ŒæŸ¥æ‰¾

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å¯¹äºæ–°äºº

**ç¬¬ä¸€å¤©**ï¼š
1. é˜…è¯»README.md
2. é˜…è¯»é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md
3. æµè§ˆAPIæ¥å£è®¾è®¡.md

**ç¬¬ä¸€å‘¨**ï¼š
4. ç†Ÿæ‚‰ä»£ç ç»“æ„
5. é˜…è¯»å¼€å‘è§„èŒƒ
6. è¿è¡Œå•å…ƒæµ‹è¯•
7. æœ¬åœ°éƒ¨ç½²è°ƒè¯•

---

### å¯¹äºé¡¹ç›®ç»´æŠ¤è€…

**å®šæœŸä»»åŠ¡**ï¼š
- æ›´æ–°README.md
- è¡¥å……æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°APIæ–‡æ¡£
- å½’æ¡£å†å²æ–‡æ¡£

**æ¨èå·¥å…·**ï¼š
- IDEï¼šIntelliJ IDEA
- APIæµ‹è¯•ï¼šPostman/Insomnia
- æ•°æ®åº“ï¼šNavicat/DataGrip
- ç‰ˆæœ¬æ§åˆ¶ï¼šGit

---

## ğŸ“ é™„å½•

### A. å…³é”®æ–‡ä»¶è·¯å¾„é€ŸæŸ¥

| æ–‡ä»¶ | å®Œæ•´è·¯å¾„ |
|------|---------|
| ä¸»å¯åŠ¨ç±» | `collabtask-api/src/main/java/io/user/ApiApplication.java` |
| æ ¸å¿ƒé…ç½® | `collabtask-api/src/main/resources/application.yml` |
| æ•°æ®åº“Schema | `database/schema_acl.sql` |
| APIè®¾è®¡ | `docs-final/01-è®¾è®¡æ–‡æ¡£/05-APIæ¥å£è®¾è®¡.md` |
| å¼€å‘è§„èŒƒ | `develop-style.mdc` |
| é¡¹ç›®æ€»ç»“ | `docs-final/03-äº¤ä»˜æ–‡æ¡£/é¡¹ç›®äº¤ä»˜-æœ€ç»ˆæ€»ç»“.md` |

### B. æ¨èåˆ é™¤æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€è¿›ä¸€æ­¥ç²¾ç®€ï¼Œå¯ä»¥åˆ é™¤ï¼š
- `archive/` - æ‰€æœ‰å½’æ¡£æ–‡ä»¶ï¼ˆçº¦100MBï¼‰
- `docs/` - ä¿ç•™docs-finalå³å¯
- å„ç§ä¸´æ—¶æ—¥å¿—æ–‡ä»¶

**æ³¨æ„**ï¼šåˆ é™¤å‰è¯·å¤‡ä»½ï¼

### C. æ–‡ä»¶æ¸…å•ç‰ˆæœ¬

- **ç‰ˆæœ¬**ï¼šv1.0
- **æ—¥æœŸ**ï¼š2025-11-10
- **ç»´æŠ¤äºº**ï¼šSystem Organizer

---

**æ–‡ä»¶æ•´ç†å®Œæˆï¼é¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œæ˜“äºå¯¼èˆªï¼** âœ…

